Version 4
SHEET 1 3712 1124
WIRE 480 -80 480 -128
WIRE 480 48 480 0
WIRE 640 48 480 48
WIRE 480 96 480 48
WIRE 480 208 480 176
WIRE 640 272 640 48
WIRE 656 272 640 272
WIRE 832 288 720 288
WIRE 1072 288 1072 256
WIRE 1648 288 1520 288
WIRE 464 304 272 304
WIRE 656 304 464 304
WIRE 1520 320 1520 288
WIRE 1648 352 1648 288
WIRE 2320 400 2224 400
WIRE 2464 400 2400 400
WIRE 560 416 560 384
WIRE 1520 416 1520 400
WIRE 832 432 832 288
WIRE 928 432 832 432
WIRE 1072 432 1072 368
WIRE 1072 432 992 432
WIRE 1648 448 1648 432
WIRE 1760 448 1648 448
WIRE 1648 464 1648 448
WIRE 1552 480 1408 480
WIRE 2656 496 2656 432
WIRE 2608 512 2592 512
WIRE 560 528 560 496
WIRE 752 528 560 528
WIRE 2592 528 2592 512
WIRE 928 544 816 544
WIRE 1072 544 1072 432
WIRE 1072 544 992 544
WIRE 1152 544 1072 544
WIRE 1296 544 1296 528
WIRE 1296 544 1232 544
WIRE 2224 544 2224 400
WIRE 2320 544 2224 544
WIRE 560 560 560 528
WIRE 752 560 736 560
WIRE 1648 560 1648 544
WIRE 1760 560 1760 448
WIRE 1808 560 1760 560
WIRE 2464 560 2464 400
WIRE 2464 560 2384 560
WIRE 2560 560 2464 560
WIRE 1408 576 1408 480
WIRE 1456 576 1408 576
WIRE 2320 576 1872 576
WIRE 1552 592 1552 480
WIRE 1552 592 1520 592
WIRE 1808 592 1552 592
WIRE 1296 608 1296 544
WIRE 1456 608 1296 608
WIRE 2224 640 2224 544
WIRE 736 656 736 560
WIRE 560 672 560 640
WIRE 2656 672 2656 576
WIRE 2736 672 2656 672
WIRE 736 688 736 656
WIRE 2224 752 2224 720
WIRE 560 768 560 752
FLAG 688 320 0
FLAG 1840 608 0
FLAG 1296 464 0
FLAG 784 576 0
FLAG 2736 672 Output
IOPIN 2736 672 Out
FLAG 272 304 MotorCurrentSensor
IOPIN 272 304 In
FLAG 736 688 BrakeSensor
IOPIN 736 688 In
FLAG 80 832 0
FLAG 80 752 +5V
FLAG 784 512 +5V
FLAG 688 256 +5V
FLAG 1840 544 +5V
FLAG 1072 256 +5V
FLAG 1488 560 +5V
FLAG 1488 624 0
FLAG -144 832 0
FLAG -144 752 +12V
FLAG 2592 528 0
FLAG 2656 432 +12V
FLAG 2352 592 0
FLAG 2352 528 +12V
FLAG 2224 752 0
FLAG 480 208 0
FLAG 480 -128 +5V
FLAG 560 384 +5V
FLAG 560 768 0
FLAG -224 576 0
FLAG -224 496 test
FLAG 464 304 test
FLAG 736 656 test
FLAG 1648 560 0
FLAG 1520 416 0
SYMBOL cap 1280 464 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL voltage 80 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply
SYMATTR Value 5V
SYMBOL res 1056 272 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL Comparators\\LT1720 688 224 R0
SYMATTR InstName U1
SYMBOL Comparators\\LT1720 784 480 R0
SYMATTR InstName U2
SYMBOL Comparators\\LT1720 1840 512 R0
SYMATTR InstName U3
SYMBOL res 1248 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R
SYMATTR Value 200k
SYMBOL OpAmps\\UniversalOpAmp2 1488 592 R0
SYMATTR InstName U4
SYMBOL diode 992 416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL diode 992 528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL voltage -144 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName 12VSupply
SYMATTR Value 12V
SYMBOL OpAmps\\UniversalOpAmp2 2352 560 R0
SYMATTR InstName U5
SYMBOL res 2416 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 14k
SYMBOL res 2208 624 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 464 80 R0
SYMATTR InstName R3
SYMATTR Value 4.7k
SYMBOL res 464 -96 R0
SYMATTR InstName R5
SYMATTR Value 3.1k
SYMBOL res 544 400 R0
SYMATTR InstName R6
SYMATTR Value 5.6k
SYMBOL res 544 544 R0
SYMATTR InstName R7
SYMATTR Value 7.5k
SYMBOL res 544 656 R0
SYMATTR InstName R8
SYMATTR Value 68
SYMBOL sw 2656 480 R0
SYMATTR InstName S1
SYMATTR Value BSPD_Relay
SYMBOL voltage -224 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 0.5 0.5)
SYMBOL res 1632 336 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 1632 448 R0
SYMATTR InstName R10
SYMATTR Value 40k
SYMBOL voltage 1520 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
TEXT 2488 832 Left 2 !.tran 2s
TEXT 720 128 Left 2 ;Can replace all LT1720 with other +5V capable comparators
TEXT 968 600 Left 2 ;AND logic
TEXT 1016 696 Left 2 ;Delay is about 0.4s. This considers the 0.7V offset into delay (filter) from diodes
TEXT 720 168 Left 2 ;Must have low offset voltage (<5mV when above normal operating temperature)
TEXT 224 464 Left 2 ;see calcs spreadsheet
TEXT 1432 656 Left 2 ;op-amp
TEXT 2720 536 Left 2 ;latching relay
TEXT 136 24 Left 2 ;low tolerance resistors
TEXT 128 56 Left 2 ;3.1V ref for brake sensor
TEXT 216 496 Left 2 ;2.89V ref for motor
TEXT 224 432 Left 2 ;low tolerance resistors
TEXT 2488 864 Left 2 !.model BSPD_Relay sw(Vt=10 Vh=0.1 Ron=1 Roff=1Meg)
TEXT 2304 624 Left 2 ;op-amp
TEXT 1720 328 Left 2 ;low tolerance resistors
TEXT 1712 360 Left 2 ;4V ref for 0.4s delay
TEXT 2400 720 Left 2 ;disconnected bc relay doesn't work
